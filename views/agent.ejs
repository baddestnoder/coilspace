<!DOCTYPE html>
<html>
<head>
	<%-include("./partialTemplate/meta.ejs")%>
	<title>Become An Agent</title>


	<style type="text/css">



		@media screen and (min-width: 200px){

			div.menu_to_login{
				background-color: rgb(230, 250, 255);
			}
			
			.wallet_wrapper{
				display: none;
			}

			main{
				padding: 60px 5% 150px 5%;
				border-top: 1px solid rgb(200, 200, 200);
				margin: 5px auto 0 auto;
			}


			h1{
				font-size: 1.6rem;
				color: rgb(60, 60, 60);
			}


			main p, main li{
				font-size: 1.1rem;
				margin-top: 15px;
				line-height: 1.8;
			}


			main ol{
				margin-left: 5%;
				margin-top: 10px;
			}


			main form{
				padding: 20px;
				border: 1px solid rgb(190, 190, 190);
				border-radius: 15px;
				margin-top: 30px;
			}


			main form label{
				padding-left: 5%;
				margin-top: 30px;
				font-weight: 600;
				display: block;
			}


			main form input{
				display: block;
				width: 90%;
				height: 40px;
				font-size: 0.9rem;
				border: 1px solid rgb(100, 100, 100);
				padding-left: 5%;
				margin: 5px 0 20px 5%;
				box-sizing: border-box;
			}



			main form button{
				display: block;
				width: 40%;
				border: none;
				background-color: rgb(0, 100, 50);
				color: white;
				padding: 8px 0;
				font-size: 1rem;
				margin-left: 5%;
				border-radius: 5px;
				box-sizing: border-box;
			}
		}




		@media screen and (min-width: 200px){


			main form input{
				font-size: 1rem;
			}



			main form button{
				padding: 10px 0;
				width: 100px;
			}
		}





		@media screen and (min-width: 200px){


			main form input{
				height: 50px;
			}



			main form button{
				padding: 15px 0;
			}
		}
	</style>
</head>



	<%
		const currencyFormatter = new Intl.NumberFormat(data.currency_format, {
		    style: 'currency',
		    currency: data.currency
		});
	%>








<body>

	<%-include("./partialTemplate/header.ejs")%>


	<main>



		<section>
			<h1>Become a Coil Agent</h1>

			<p>A Coil dealer is someone involved in the buying and selling of Coil. They can either buy in bulk directly from the company or from individuals. Bulk coil contains 17% bonus, while coil generated by individuals contains 20% bonus... To get started as a full-time Coil Dealer, certain requirements and expertise are necessary for a successful carrier.</p>

			<ol>
				<li><b>A WhatsApp Business Account: </b> This is necessary for easy communication and transaction between you and your clients.</li>


				<li><b>Availability and Quality Communication: </b> Coil Agency is a full time business, we prioritize staying online on WhatsApp to reach a wider audience. Many customers may have questions about CoilSpace, your patience and polite conversations makes them feel welcomed and promote professionalism.</li>

				<li><b>Thorough Understanding of CoilSpace: </b> As a Coil dealer, it's essential to have a comprehensive understanding of the CoilSpace platform, including its features, functionalities, and the latest updates. This knowledge allows you to provide accurate information and guidance to clients, enhancing their overall experience.</li>

				<li><b>Legitimacy and Transparency: </b> This build trust for long term business relationship and repeat transactions between you and your clients. Every interaction with a client is an opportunity to solidify trust, as each client has the potential to provide feedback to us. Negative reports can lead to severe consequences, including the banning of accounts and loss of funds.</li>


				<li><b>How to Buy Bulk Coil: </b> The minimum unit of coil to buy from the company is 100 Unit which cost <%=currencyFormatter.format(100*rate)%>... To buy it, you have to send us a mail via BuyCoil@CoilSpace.com  </li>

				<li><b>Applying for Coil Agency: </b> Once you've set up your WhatsApp Business Account, copy and paste your WhatsApp Short Link in the input below and Click "Apply"... That's all, you can start buying bulk coil and we will connect traders from our platform to purchase from you through the WhatsApp link.</li>
			</ol>
		</section>



		<form>
			<label for="whatsapp_link">WhatsApp Link</label>
			<input required placeholder="Paste Your WhatsApp Link" type="text" name="whatsapp_link">
			<label for="whatsapp_number">WhatsApp Number</label>
			<input required placeholder="Enter Your WhatsApp Number" type="phone" name="whatsapp_number">
			<button class="submit_button">Apply</button>
		</form>




		<section style="display: none;" class="alert_wrapper">
			<i class="alert_icon fa-solid fa-circle-exclamation"></i>
			<p class="alert_p"></p>
			<button class="alert_cancel">Okay</button>
		</section>
	</main>



	<%-include("./partialTemplate/footer.ejs")%>







	<script type="text/javascript">
		
		const form = document.querySelector("form");
		const submit_button = document.querySelector(".submit_button");
		const body = document.querySelector("body");
		const alert_p = document.querySelector(".alert_p");
		const alert_icon = document.querySelector(".alert_icon");
		const alert_cancel = document.querySelector(".alert_cancel");
		const alert_wrapper = document.querySelector(".alert_wrapper");








		const display_alert = ()=>{
			body_overlay.style.display = "block";
			body_overlay.style.opacity = "0.8";
			alert_wrapper.style.display = "block";

			const scrollY = window.scrollY || window.pageYOffset;
		  	const topPosition = 100+scrollY + 'px';
		    alert_wrapper.style.top = topPosition;
		}


		const closs_alert = ()=>{
			body_overlay.style.opacity = "0";
			body_overlay.style.display = "none";
			alert_wrapper.style.display = "none";
		}





		form.addEventListener("submit", async(e)=>{
			e.preventDefault();

			alert_icon.className = "alert_icon alert_icon fa-solid fa-circle-exclamation";

			if(submit_button.disabled){
			}else{

				try{

					submit_button.disabled = true
					submit_button.textContent = "Loading...";
					const result = await fetch("/agent", {

						body: JSON.stringify({
							whatsapp_link: form.whatsapp_link.value,
							whatsapp_number: form.whatsapp_number.value
						}),

						headers: {"Content-Type": "application/json"},
						
						method: "POST"
					});

					const res = await result.json();
					submit_button.disabled = false
					submit_button.textContent = "Apply";

					if(res.message === "successful"){
						display_alert();
						alert_icon.className = "alert_icon fa-regular fa-circle-check";
						alert_p.textContent = "Updated Successfully";
					}else if(res.message === "login needed"){
						display_alert();
						alert_p.textContent = "Something Went Wrong: for your own safety, we are logging you out... Login and try again.";

						alert_cancel.addEventListener("click", ()=>{
							window.location.href = "/login";
						});

						setTimeout(()=>{
							window.location.href = "/login";
						}, 8000);
					}else if(res.message === "Invalid WhatsApp link"){
						display_alert();
						alert_p.textContent = res.message;
					}else if(res.message.includes("already been used")){
						display_alert();
						alert_p.textContent = res.message;
					}else{
						console.log(res.message);
						display_alert();
						alert_p.textContent = res.message;
					}
				}catch(error){
					console.log(error);
					display_alert();
					alert_p.textContent = error.message
				}


			}
		});















		body_overlay.addEventListener("click", ()=>{
			closs_alert();
		});

		alert_cancel.addEventListener("click", ()=>{
			closs_alert();
		});

		window.onscroll = function() {
			closs_alert();
		};

	</script>

</body>
</html>